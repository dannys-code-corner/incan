
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Incan programming language">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>RFC 013: Rust Crate Dependencies - Incan Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/pygments.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rfc-013-rust-crate-dependencies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Incan Documentation" class="md-header__button md-logo" aria-label="Incan Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Incan Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RFC 013: Rust Crate Dependencies
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dannys-code-corner/incan" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    dannys-code-corner/incan
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Incan Documentation" class="md-nav__button md-logo" aria-label="Incan Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Incan Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dannys-code-corner/incan" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    dannys-code-corner/incan
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../start_here/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Start here
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Start here
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start_here/coming_from_python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coming from Python (apps)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start_here/coming_from_rust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coming from Rust (evaluator)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start_here/pipelines_and_automation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipelines & automation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start_here/beginner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Beginner
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../language/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Language
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../language/tutorials/book/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    The Incan Book (Basics)
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2_1" id="__nav_3_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1">
            <span class="md-nav__icon md-icon"></span>
            The Incan Book (Basics)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/01_hello_world/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Hello world
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/02_values_variables_and_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Values, variables, and types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/03_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/04_control_flow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Control flow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/05_modules_and_imports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Modules and imports
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/06_errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Errors (Result/Option and `?`)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/07_strings_and_formatting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Strings and formatting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/08_collections_and_iteration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Collections and iteration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/09_enums/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Enums and better `match`
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/10_models_vs_classes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10. Models vs classes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/11_traits_and_derives/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11. Traits and derives
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/book/12_newtypes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12. Newtypes (stronger types)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/build_your_first_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build your first API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/tutorials/web_framework/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web framework
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How-to
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            How-to
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/async_programming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Async programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/customize_derived_behavior/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customize derived behavior
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/error_handling_recipes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error handling recipes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/error_messages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error messages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/file_io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File I/O
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/imports_and_modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Imports and modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/modeling_with_enums/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modeling with enums
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/string_processing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    String processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/rust_interop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rust interop
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/how-to/rust_types_for_python_devs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rust types (coming from Python)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../language/reference/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/language/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Language reference (generated)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/file_io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File I/O reference (Path/File APIs)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/imports_and_modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Imports and modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/numeric_semantics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Numeric semantics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/strings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Strings and Bytes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/derives_and_traits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Derives & traits (reference)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../language/reference/stdlib_traits/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Stdlib traits
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4_9" id="__nav_3_4_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_9">
            <span class="md-nav__icon md-icon"></span>
            Stdlib traits
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/stdlib_traits/collection_protocols/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Collection protocols
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/stdlib_traits/indexing_and_slicing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Indexing and slicing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/stdlib_traits/callable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Callable objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/stdlib_traits/error/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error trait
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/stdlib_traits/operators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/stdlib_traits/conversions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conversions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_10" >
        
          
          <label class="md-nav__link" for="__nav_3_4_10" id="__nav_3_4_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Derives
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_10">
            <span class="md-nav__icon md-icon"></span>
            Derives
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/derives/string_representation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    String representation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/derives/comparison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comparison
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/derives/copying_default/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Copying/default
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/derives/serialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serialization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/reference/derives/custom_behavior/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom behavior
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Explanation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Explanation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/why_incan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why Incan?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/why_not_just_rust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why not just Rust?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/how_incan_works/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How Incan works
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/control_flow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Control flow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/closures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Closures
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/consts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Consts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/derives_and_traits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Derives & traits (explained)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/how_derives_work/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How derives work
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/enums/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enums
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/error_handling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error handling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/imports_and_modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Imports and modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/models_and_classes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models and classes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/traits_as_language_hooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Traits as language hooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/explanation/scopes_and_name_resolution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scopes and name resolution
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tooling/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tooling
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tooling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/tutorials/getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/tutorials/pipeline_mini_project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipeline mini-project
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How-to
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            How-to
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/how-to/install_and_run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install/build/run
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/how-to/ci_and_automation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CI & automation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/how-to/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/how-to/editor_setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Editor setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/how-to/lsp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LSP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/how-to/formatting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Formatting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/how-to/testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Explanation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Explanation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/explanation/projects_today/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Projects today
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/explanation/lsp_architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LSP architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/reference/cli_reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tooling/reference/lsp_protocol_support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LSP protocol support
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
          
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../contributing/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../contributing/tutorials/book/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Incan Contributor Book (Advanced)
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_2_1" id="__nav_5_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_1">
            <span class="md-nav__icon md-icon"></span>
            Incan Contributor Book (Advanced)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/tutorials/book/01_architecture_tour/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Architecture tour
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/tutorials/book/02_layering_and_boundaries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Layering and boundaries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/tutorials/book/03_proposals_issues_vs_rfcs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Proposals: issues vs RFCs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/tutorials/book/04_add_a_builtin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Your first change: add a builtin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/tutorials/book/05_add_new_syntax/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Your first syntax change
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/tutorials/book/06_tooling_loop_formatter_and_tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Tooling loop: formatter + tests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/tutorials/book/07_tooling_loop_lsp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Tooling loop: LSP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/tutorials/book/08_docsite_contributor_loop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Docsite contributor loop
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How-to
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            How-to
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/how-to/extending_language/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending the language
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/how-to/benchmarks_and_profiling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Benchmarks & profiling (repository)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/how-to/ci_and_automation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CI & automation (repository)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/how-to/writing_rfcs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing RFCs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Explanation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Explanation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/explanation/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/explanation/layering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Layering rules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/explanation/readable-maintainable-rust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Readable, maintainable Rust
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RFCs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../release_notes/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Release notes
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Release notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/0_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release 0.1
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stability policy
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goals" class="md-nav__link">
    <span class="md-ellipsis">
      Goals
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-goals-this-rfc" class="md-nav__link">
    <span class="md-ellipsis">
      Non-Goals (this RFC)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-inline-version-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      1. Inline Version Annotations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Inline Version Annotations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-basic-version" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 Basic Version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.1 Basic Version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-version-requirement-syntax-normative" class="md-nav__link">
    <span class="md-ellipsis">
      1.1.1 Version requirement syntax (normative)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-version-with-features" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 Version with Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-grammar-extension" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 Grammar Extension
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-project-configuration-incantoml" class="md-nav__link">
    <span class="md-ellipsis">
      2. Project Configuration (incan.toml)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Project Configuration (incan.toml)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-minimal-example" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Minimal Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-full-example" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Full Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-section-reference" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Section Reference
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-dependency-specification-formats" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 Dependency Specification Formats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#241-dependency-renames-package-normative" class="md-nav__link">
    <span class="md-ellipsis">
      2.4.1 Dependency renames (package = "...") (normative)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#242-optional-dependencies-normative" class="md-nav__link">
    <span class="md-ellipsis">
      2.4.2 Optional dependencies (normative)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-development-dependencies-dev-dependencies-normative" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 Development dependencies ([dev-dependencies]) (normative)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.5 Development dependencies ([dev-dependencies]) (normative)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#251-what-they-are" class="md-nav__link">
    <span class="md-ellipsis">
      2.5.1 What they are
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#252-where-dev-dependencies-may-be-used-import-gating" class="md-nav__link">
    <span class="md-ellipsis">
      2.5.2 Where dev-dependencies may be used (import gating)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#253-how-dev-dependencies-affect-cargo-project-generation" class="md-nav__link">
    <span class="md-ellipsis">
      2.5.3 How dev-dependencies affect Cargo project generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#254-locking-relationship-to-incanlock" class="md-nav__link">
    <span class="md-ellipsis">
      2.5.4 Locking (relationship to incan.lock)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#255-overlap-rules-same-crate-in-both-tables" class="md-nav__link">
    <span class="md-ellipsis">
      2.5.5 Overlap rules (same crate in both tables)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-lock-file-incanlock" class="md-nav__link">
    <span class="md-ellipsis">
      3. Lock File (incan.lock)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Lock File (incan.lock)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#30-trust-model-and-location-normative" class="md-nav__link">
    <span class="md-ellipsis">
      3.0 Trust model and location (normative)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.0 Trust model and location (normative)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#301-project-mode-vs-single-file-mode-normative" class="md-nav__link">
    <span class="md-ellipsis">
      3.0.1 Project mode vs single-file mode (normative)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#31-format" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#311-canonicalization-and-deps-fingerprint-normative" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.1 Canonicalization and deps-fingerprint (normative)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-cli-commands" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 CLI Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 CLI Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-strict-mode-flags-combined-meaning-normative" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.1 Strict-mode flags: combined meaning (normative)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-incan-lock-and-restricted-environments-normative-direction" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.2 incan lock and restricted environments (normative direction)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-relationship-to-cargolock-normative" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Relationship to Cargo.lock (normative)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-design-inspiration-informative-hatch-vs-uv" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 Design inspiration (informative): Hatch vs uv
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-resolution-rules" class="md-nav__link">
    <span class="md-ellipsis">
      4. Resolution Rules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Resolution Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-known-good-defaults" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Known-Good Defaults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-conflict-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Conflict Resolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-merging-rules-normative" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Merging rules (normative)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-source-policy-security-reproducibility-normative-direction" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 Source policy (security + reproducibility) (normative direction)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-error-messages" class="md-nav__link">
    <span class="md-ellipsis">
      5. Error Messages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Error Messages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-unknown-crate-without-version" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Unknown Crate Without Version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-feature-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Feature Not Found
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-version-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 Version Not Found
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-lock-out-of-date-locked-frozen" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 Lock Out of Date (--locked / --frozen)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-optional-dependency-not-enabled" class="md-nav__link">
    <span class="md-ellipsis">
      5.5 Optional Dependency Not Enabled
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#56-inline-annotation-forbidden-crate-is-configured-in-incantoml" class="md-nav__link">
    <span class="md-ellipsis">
      5.6 Inline Annotation Forbidden (crate is configured in incan.toml)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#57-conflicting-inline-sites-no-incantoml-entry" class="md-nav__link">
    <span class="md-ellipsis">
      5.7 Conflicting Inline Sites (no incan.toml entry)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#58-dev-dependency-imported-from-production-code" class="md-nav__link">
    <span class="md-ellipsis">
      5.8 Dev-Dependency Imported from Production Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#59-git-branch-not-allowed-in-strict-mode" class="md-nav__link">
    <span class="md-ellipsis">
      5.9 Git Branch Not Allowed in Strict Mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#510-dependency-rename-collision" class="md-nav__link">
    <span class="md-ellipsis">
      5.10 Dependency Rename Collision
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-implementation-phases" class="md-nav__link">
    <span class="md-ellipsis">
      6. Implementation Phases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Implementation Phases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-inline-versions-initial-scope" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 1: Inline Versions (initial scope)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-features-support" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 2: Features Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-project-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 3: Project Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4-lock-file" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 4: Lock File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-5-advanced-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 5: Advanced Sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-examples" class="md-nav__link">
    <span class="md-ellipsis">
      7. Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-simple-usage-phase-1" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 Simple Usage (Phase 1+)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-full-project-phase-3" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 Full Project (Phase 3+)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-mixed-inline-and-config" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 Mixed Inline and Config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-comparison-with-pyprojecttoml" class="md-nav__link">
    <span class="md-ellipsis">
      8. Comparison with pyproject.toml
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-open-questions" class="md-nav__link">
    <span class="md-ellipsis">
      9. Open Questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      10. Checklist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Checklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementing-phase-1-inline-versions" class="md-nav__link">
    <span class="md-ellipsis">
      Implementing Phase 1: Inline Versions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementing-phase-2-features" class="md-nav__link">
    <span class="md-ellipsis">
      Implementing Phase 2: Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementing-phase-3-project-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Implementing Phase 3: Project Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementing-phase-4-lock-file" class="md-nav__link">
    <span class="md-ellipsis">
      Implementing Phase 4: Lock File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementing-phase-5-advanced-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Implementing Phase 5: Advanced Sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-a-lockfile-canonicalization-and-deps-fingerprint-normative" class="md-nav__link">
    <span class="md-ellipsis">
      Appendix A: Lockfile canonicalization and deps-fingerprint (normative)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix A: Lockfile canonicalization and deps-fingerprint (normative)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a1-embedded-lock-payload-canonicalization" class="md-nav__link">
    <span class="md-ellipsis">
      A.1 Embedded lock payload canonicalization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a2-deps-fingerprint-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      A.2 deps-fingerprint algorithm
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-b-design-inspiration-informative-hatch-vs-uv" class="md-nav__link">
    <span class="md-ellipsis">
      Appendix B: Design inspiration (informative): Hatch vs uv
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="rfc-013-rust-crate-dependencies">RFC 013: Rust Crate Dependencies<a class="headerlink" href="#rfc-013-rust-crate-dependencies" title="Permanent link">&para;</a></h1>
<p><strong>Status:</strong> Planned<br />
<strong>Created:</strong> 2025-12-16<br />
<strong>Author(s):</strong> Danny Meijer (@danny-meijer)<br />
<strong>Supersedes:</strong> Parts of RFC 005 (Cargo integration section)<br />
<strong>Related:</strong> RFC 015 (project lifecycle + <code>incan.toml</code>), RFC 020 (Cargo offline/locked policy)</p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>Define a comprehensive system for specifying Rust crate dependencies in Incan, including inline version annotations,
project configuration (<code>incan.toml</code>), and lock files for reproducibility.</p>
<h2 id="motivation">Motivation<a class="headerlink" href="#motivation" title="Permanent link">&para;</a></h2>
<p>Incan compiles to Rust, meaning access to the Rust ecosystem is a core value proposition.
The current implementation (v0.1) has limitations:</p>
<ol>
<li><strong>Known-good crates work</strong> - common crates like <code>serde</code>, <code>tokio</code> have curated defaults</li>
<li><strong>Unknown crates error</strong> - no user-facing way to specify version/features</li>
<li><strong>Workaround is manual</strong> - edit generated <code>Cargo.toml</code> (clunky, not reproducible)</li>
</ol>
<p>This RFC introduces a proper dependency management system that is:</p>
<ul>
<li><strong>Easy by default</strong> - common crates "just work"</li>
<li><strong>Flexible when needed</strong> - any crate can be used with explicit config</li>
<li><strong>Reproducible</strong> - builds are deterministic via lock files</li>
<li><strong>Pythonic</strong> - <code>incan.toml</code> feels like <code>pyproject.toml</code></li>
</ul>
<h2 id="goals">Goals<a class="headerlink" href="#goals" title="Permanent link">&para;</a></h2>
<ul>
<li>Allow any Rust crate with explicit version specification</li>
<li>Maintain known-good defaults as convenient fallbacks</li>
<li>Support features, git sources, and path dependencies</li>
<li>Provide a familiar project configuration format</li>
<li>Enable reproducible builds via lock file</li>
</ul>
<h2 id="non-goals-this-rfc">Non-Goals (this RFC)<a class="headerlink" href="#non-goals-this-rfc" title="Permanent link">&para;</a></h2>
<ul>
<li>Automatic version resolution/upgrade (future: <code>incan update</code>)</li>
<li>Private registry support</li>
<li>Workspace/multi-project configuration</li>
<li>Native FFI bindings beyond Rust</li>
</ul>
<hr />
<h2 id="1-inline-version-annotations">1. Inline Version Annotations<a class="headerlink" href="#1-inline-version-annotations" title="Permanent link">&para;</a></h2>
<h3 id="11-basic-version">1.1 Basic Version<a class="headerlink" href="#11-basic-version" title="Permanent link">&para;</a></h3>
<div class="language-incan highlight"><pre><span></span><code><span class="c1"># Specify a version requirement</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">my_crate</span> <span class="o">@</span> <span class="s2">&quot;1.0&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">obscure_lib</span> <span class="o">@</span> <span class="s2">&quot;0.5&quot;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">Widget</span>

<span class="c1"># Cargo SemVer requirement strings (same semantics as Cargo.toml `version = &quot;...&quot;`)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">some_crate</span> <span class="o">@</span> <span class="s2">&quot;^1.2&quot;</span>   <span class="c1"># &gt;=1.2.0, &lt;2.0.0</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">other_crate</span> <span class="o">@</span> <span class="s2">&quot;~1.2&quot;</span>  <span class="c1"># &gt;=1.2.0, &lt;1.3.0</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">range_crate</span> <span class="o">@</span> <span class="s2">&quot;&gt;=1.30, &lt;2.0&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">exact_crate</span> <span class="o">@</span> <span class="s2">&quot;=1.2.3&quot;</span> <span class="c1"># exactly 1.2.3</span>
</code></pre></div>
<h4 id="111-version-requirement-syntax-normative">1.1.1 Version requirement syntax (normative)<a class="headerlink" href="#111-version-requirement-syntax-normative" title="Permanent link">&para;</a></h4>
<p>All version requirement strings in this RFC use <strong>Cargos SemVer requirement syntax</strong> (the same syntax accepted by Cargo
in <code>Cargo.toml</code>).</p>
<ul>
<li>Shorthand <code>"1.2.3"</code> is equivalent to caret <code>"^1.2.3"</code>.</li>
<li>Comma-separated constraints (e.g. <code>"&gt;=1.30, &lt;2.0"</code>) are allowed.</li>
</ul>
<p>Not supported (out of scope):</p>
<ul>
<li>Python/PEP 440 specifiers (e.g. <code>~=1.2</code>, <code>==1.2.*</code>, <code>!=1.3</code>).</li>
</ul>
<h3 id="12-version-with-features">1.2 Version with Features<a class="headerlink" href="#12-version-with-features" title="Permanent link">&para;</a></h3>
<div class="language-incan highlight"><pre><span></span><code><span class="c1"># Enable features</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">tokio</span> <span class="o">@</span> <span class="s2">&quot;1.0&quot;</span> <span class="k">with</span> <span class="p">[</span><span class="s2">&quot;full&quot;</span><span class="p">]</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">serde</span> <span class="o">@</span> <span class="s2">&quot;1.0&quot;</span> <span class="k">with</span> <span class="p">[</span><span class="s2">&quot;derive&quot;</span><span class="p">,</span> <span class="s2">&quot;rc&quot;</span><span class="p">]</span>

<span class="c1"># Import from crate with features</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">sqlx</span> <span class="o">@</span> <span class="s2">&quot;0.7&quot;</span> <span class="k">with</span> <span class="p">[</span><span class="s2">&quot;runtime-tokio&quot;</span><span class="p">,</span> <span class="s2">&quot;postgres&quot;</span><span class="p">]</span> <span class="kn">import</span><span class="w"> </span><span class="nn">Pool</span>
</code></pre></div>
<h3 id="13-grammar-extension">1.3 Grammar Extension<a class="headerlink" href="#13-grammar-extension" title="Permanent link">&para;</a></h3>
<div class="language-ebnf highlight"><pre><span></span><code><span class="cm">(* Extended import syntax for rust:: crates *)</span>
<span class="k">rust_import     </span><span class="o">=</span> <span class="s2">&quot;import&quot;</span> <span class="s2">&quot;rust&quot;</span> <span class="s2">&quot;::&quot;</span> <span class="k">crate_path </span><span class="p">[</span> <span class="k">version_spec </span><span class="p">]</span> <span class="p">[</span> <span class="s2">&quot;as&quot;</span> <span class="k">IDENT </span><span class="p">]</span>
                <span class="p">|</span> <span class="s2">&quot;from&quot;</span> <span class="s2">&quot;rust&quot;</span> <span class="s2">&quot;::&quot;</span> <span class="k">crate_path </span><span class="p">[</span> <span class="k">version_spec </span><span class="p">]</span> <span class="s2">&quot;import&quot;</span> <span class="k">import_list </span><span class="p">;</span>

<span class="k">crate_path      </span><span class="o">=</span> <span class="k">IDENT </span><span class="p">{</span> <span class="s2">&quot;::&quot;</span> <span class="k">IDENT </span><span class="p">}</span> <span class="p">;</span>
<span class="k">version_spec    </span><span class="o">=</span> <span class="s2">&quot;@&quot;</span> <span class="k">version_string </span><span class="p">[</span> <span class="s2">&quot;with&quot;</span> <span class="k">feature_list </span><span class="p">]</span> <span class="p">;</span>
<span class="k">version_string  </span><span class="o">=</span> <span class="k">STRING </span><span class="p">;</span>  <span class="cm">(* Cargo SemVer requirement string, e.g. &quot;1.0&quot;, &quot;^1.2&quot;, &quot;~0.5&quot;, &quot;&gt;=1.30, &lt;2.0&quot;, &quot;=1.2.3&quot; *)</span>
<span class="k">feature_list    </span><span class="o">=</span> <span class="s2">&quot;[&quot;</span> <span class="k">STRING </span><span class="p">{</span> <span class="s2">&quot;,&quot;</span> <span class="k">STRING </span><span class="p">}</span> <span class="s2">&quot;]&quot;</span> <span class="p">;</span>
<span class="k">import_list     </span><span class="o">=</span> <span class="k">IDENT </span><span class="p">{</span> <span class="s2">&quot;,&quot;</span> <span class="k">IDENT </span><span class="p">}</span> <span class="p">;</span>
</code></pre></div>
<p>Normative note (interop alignment):</p>
<ul>
<li>A <code>rust::...</code> import may include a module path (e.g. <code>rust::chrono::naive::date</code>), but dependency resolution is always
  keyed by the <strong>crate segment</strong> (the first identifier after <code>rust::</code>), per RFC 005s crate/path decomposition rules.</li>
<li>Therefore, <code>@ "..."</code> / <code>with [...]</code> always apply to that crate segment, not to the module path.</li>
</ul>
<hr />
<h2 id="2-project-configuration-incantoml">2. Project Configuration (<code>incan.toml</code>)<a class="headerlink" href="#2-project-configuration-incantoml" title="Permanent link">&para;</a></h2>
<p>We propose to add a central configuration file for Incan projects called <code>incan.toml</code>. The <code>incan.toml</code> format is heavily
inspired by Python's <code>pyproject.toml</code> - familiar, readable, and declarative.</p>
<p>Schema note (normative):</p>
<ul>
<li>In <code>incan.toml</code>, Cargo/Rust crate dependencies use Cargo-style tables:<ul>
<li><strong><code>[dependencies]</code></strong> for normal dependencies</li>
<li><strong><code>[dev-dependencies]</code></strong> for test-only dependencies (bench tooling is a future extension)</li>
</ul>
</li>
<li>Compatibility/aliasing (for this RFC):<ul>
<li><code>[rust.dependencies]</code> / <code>[rust.dev-dependencies]</code> are accepted as aliases for <code>[dependencies]</code> / <code>[dev-dependencies]</code>.</li>
<li>It is a configuration error to specify both the canonical and alias tables for the same kind (e.g. both
  <code>[dependencies]</code> and <code>[rust.dependencies]</code>).</li>
</ul>
</li>
<li>RFC 015 defines the broader project lifecycle and treats <code>incan.toml</code> as the project metadata root; it must not define
  a separate, conflicting table for dependency policy.</li>
</ul>
<p>Clarity note (future-proofing):</p>
<ul>
<li>In this RFC, <code>[dependencies]</code> / <code>[dev-dependencies]</code> refer specifically to <strong>Cargo/Rust crates</strong> used by <code>rust::...</code>
  imports.</li>
<li>Incan does not yet define a separate Incan package registry concept. If a future packaging story is added, it must
  not overload these tables in a way that breaks Rust dependency determinism.</li>
</ul>
<p>Recommended practice (strongly suggested):</p>
<ul>
<li>Prefer centralized Rust dependency policy in <code>incan.toml</code> for real projects.</li>
<li>Reserve inline annotations (<code>@ "..."</code> / <code>with [...]</code>) for small scripts, prototypes, and one-off examples.</li>
</ul>
<h3 id="21-minimal-example">2.1 Minimal Example<a class="headerlink" href="#21-minimal-example" title="Permanent link">&para;</a></h3>
<div class="language-toml highlight"><pre><span></span><code><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_app&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>
</code></pre></div>
<h3 id="22-full-example">2.2 Full Example<a class="headerlink" href="#22-full-example" title="Permanent link">&para;</a></h3>
<div class="language-toml highlight"><pre><span></span><code><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_app&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;An example Incan application&quot;</span>
<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Alice &lt;alice@example.com&gt;&quot;</span><span class="p">]</span>
<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MIT&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;README.md&quot;</span>

<span class="c1"># Minimum Incan version required</span>
<span class="n">requires-incan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;=0.2.0&quot;</span>

<span class="c1"># Entry point for `incan run`</span>
<span class="k">[project.scripts]</span>
<span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;src/main.incn&quot;</span>

<span class="c1"># Dependencies (Cargo crates used by `rust::...` imports)</span>
<span class="k">[dependencies]</span>
<span class="c1"># Simple version string</span>
<span class="n">reqwest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.12&quot;</span>
<span class="n">rand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.8&quot;</span>

<span class="c1"># Version with features</span>
<span class="n">sqlx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;0.7&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;runtime-tokio&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;postgres&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;mysql&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="n">tokio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1.35&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;full&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="n">serde</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;derive&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># Git dependency</span>
<span class="n">my_internal_crate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/company/crate&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;v1.0.0&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># Path dependency (for local development)</span>
<span class="n">local_lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;../my-local-lib&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># Optional dependencies (enabled via features)</span>
<span class="k">[dependencies.optional]</span>
<span class="n">fancy_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;0.3&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># Development dependencies (not included in release builds)</span>
<span class="k">[dev-dependencies]</span>
<span class="n">criterion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.5&quot;</span>
<span class="n">proptest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>

<span class="c1"># Build configuration</span>
<span class="k">[build]</span>
<span class="c1"># Rust edition for generated code (advanced)</span>
<span class="c1"># Allowed values (for this RFC): &quot;2021&quot;, &quot;2024&quot; (default: &quot;2021&quot;)</span>
<span class="n">rust-edition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2021&quot;</span>

<span class="c1"># Optimization level: &quot;debug&quot;, &quot;release&quot;, &quot;release-lto&quot;</span>
<span class="n">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;release&quot;</span>

<span class="c1"># Target triple (optional, defaults to host)</span>
<span class="c1"># target = &quot;x86_64-unknown-linux-gnu&quot;</span>

<span class="c1"># Feature flags for the Incan project itself</span>
<span class="k">[project.features]</span>
<span class="n">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">]</span>
<span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w">  </span><span class="c1"># Enables JSON serialization support</span>
<span class="n">full</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;fancy_logging&quot;</span><span class="p">]</span>
</code></pre></div>
<p>Note:</p>
<ul>
<li><code>[project.features]</code> is part of the general Incan project model (RFC 015). It is included here for context only.</li>
<li>This RFC does <strong>not</strong> specify an automatic mapping between <code>[project.features]</code> and Rust crate features/optional
  dependencies. Any such mapping should be specified by RFC 015 (or a dedicated follow-up), so that Cargo feature
  semantics are not implicitly re-invented in multiple places.</li>
<li><code>[build]</code> is also part of the general Incan project model (RFC 015). This RFC references it only for completeness in
  the full example; dependency resolution and <code>incan.lock</code> do not depend on build settings like <code>rust-edition</code>.</li>
</ul>
<h3 id="23-section-reference">2.3 Section Reference<a class="headerlink" href="#23-section-reference" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Section</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[project]</code></td>
<td>Project metadata (name, version, authors, etc.)</td>
</tr>
<tr>
<td><code>[project.scripts]</code></td>
<td>Entry points for CLI commands</td>
</tr>
<tr>
<td><code>[project.features]</code></td>
<td>Optional feature flags</td>
</tr>
<tr>
<td><code>[dependencies]</code></td>
<td>Cargo/Rust crate dependencies</td>
</tr>
<tr>
<td><code>[dev-dependencies]</code></td>
<td>Development-only crate dependencies</td>
</tr>
<tr>
<td><code>[build]</code></td>
<td>Build configuration options</td>
</tr>
</tbody>
</table>
<h3 id="24-dependency-specification-formats">2.4 Dependency Specification Formats<a class="headerlink" href="#24-dependency-specification-formats" title="Permanent link">&para;</a></h3>
<div class="language-toml highlight"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="c1"># String shorthand - just version</span>
<span class="n">crate_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>

<span class="c1"># Table form - version + features</span>
<span class="n">crate_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># Table form - git source</span>
<span class="n">crate_c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/...&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="n">crate_d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/...&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;v1.0.0&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="n">crate_e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/...&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rev</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;abc1234&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># Table form - path source</span>
<span class="n">crate_f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;../local-crate&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># Optional dependency</span>
<span class="n">crate_g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># Default features disabled</span>
<span class="n">crate_h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default-features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;only-this&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h3 id="241-dependency-renames-package-normative">2.4.1 Dependency renames (<code>package = "..."</code>) (normative)<a class="headerlink" href="#241-dependency-renames-package-normative" title="Permanent link">&para;</a></h3>
<p>Cargo supports depending on a package whose crates.io/package name differs from the identifier you want to use in code via
dependency renaming (<code>package = "..."</code>).</p>
<p>In Incan, <code>rust::...</code> imports refer to the <strong>dependency key</strong> (the Rust identifier form), which is also the name used in
generated Rust code.</p>
<p>Supported (for this RFC):</p>
<ul>
<li>In <code>incan.toml</code> dependency tables, users may specify a dependency rename using:</li>
</ul>
<div class="language-toml highlight"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="c1"># `rust::serde_json` in code, but crates.io package is `serde-json`</span>
<span class="n">serde_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;serde-json&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<ul>
<li>The <code>rust::</code> import must use the dependency key (<code>rust::serde_json</code> in the example above).</li>
<li>If <code>package</code> is specified, it must be a non-empty string.</li>
<li>It is a configuration error to specify two dependencies that would resolve to the same <code>(source, package)</code> pair with
  different <code>crate_name</code> keys.</li>
</ul>
<p>Note:</p>
<ul>
<li>For the common case where the crates.io package name differs only by <code>-</code> vs <code>_</code>, Cargo/crates.io name normalization is
  typically sufficient. Using <code>package = "..."</code> is still allowed (and may improve clarity), and is required for
  non-trivial mismatches beyond <code>-</code>/<code>_</code> normalization.</li>
</ul>
<p>Out of scope (for this RFC):</p>
<ul>
<li>Automatically inferring <code>package = "..."</code> from imports.</li>
<li>Supporting non-trivial one package provides multiple crate names patterns beyond Cargos standard rename mechanism.</li>
</ul>
<h3 id="242-optional-dependencies-normative">2.4.2 Optional dependencies (normative)<a class="headerlink" href="#242-optional-dependencies-normative" title="Permanent link">&para;</a></h3>
<p>Incan supports Cargo-style optional dependencies via the standard Cargo fields:</p>
<ul>
<li><code>optional = true</code> on a dependency entry</li>
</ul>
<p>Enablement model (for this RFC):</p>
<ul>
<li>This RFC does <strong>not</strong> define an Incan-native feature system that automatically toggles Cargo optional dependencies.</li>
<li>Optional dependency enablement is controlled by <strong>Cargo features</strong> (Cargo semantics), surfaced to users via RFC 020s
  <code>--cargo-args</code> escape hatch (e.g. <code>--cargo-args "--features" "fancy_logging"</code>), and/or a future RFC 015 mapping.</li>
</ul>
<p><code>[dependencies.optional]</code> table:</p>
<ul>
<li><code>[dependencies.optional]</code> is syntactic sugar for grouping optional dependency entries.</li>
<li>It does not introduce any new enablement behavior; it only implies <code>optional = true</code> for entries in that table.</li>
</ul>
<p>Cargo project generation (normative):</p>
<ul>
<li>Optional dependencies in <code>incan.toml</code> must be emitted as Cargo optional dependencies in the generated <code>Cargo.toml</code>
  (<code>optional = true</code> on the dependency entry).</li>
<li>The generated Cargo package must expose a Cargo feature with the <strong>same name as the dependency key</strong> that enables the
  optional dependency (using Cargos namespaced dependency feature form):</li>
</ul>
<div class="language-toml highlight"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="n">fancy_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;0.3&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>

<span class="k">[features]</span>
<span class="n">fancy_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;dep:fancy_logging&quot;</span><span class="p">]</span>
</code></pre></div>
<p>This avoids relying on implicit optional-dependency features, which are edition/toolchain-sensitive and can create
confusing behavior.</p>
<p>Locking note (normative):</p>
<ul>
<li>Because Cargo feature selection can change the resolved dependency graph, strict builds (<code>--locked</code> / <code>--frozen</code>) must
  ensure that the <strong>feature selection used for the build/test</strong> matches the one that was used to generate <code>incan.lock</code>.</li>
</ul>
<p>Diagnostics expectation (normative):</p>
<ul>
<li>If user code imports an optional dependency but the required Cargo feature(s) are not enabled for the build/test, the
  toolchain must produce a targeted diagnostic explaining:<ul>
<li>the crate is optional,</li>
<li>which Cargo feature name is expected (typically the dependency key),</li>
<li>and how to enable it (e.g. via RFC 020s <code>--cargo-args "--features" "&lt;name&gt;"</code>, or via a future RFC 015 mapping).</li>
</ul>
</li>
</ul>
<h3 id="25-development-dependencies-dev-dependencies-normative">2.5 Development dependencies (<code>[dev-dependencies]</code>) (normative)<a class="headerlink" href="#25-development-dependencies-dev-dependencies-normative" title="Permanent link">&para;</a></h3>
<p>Incan supports Rust <strong>development dependencies</strong> for test tooling that must not become part of release builds.</p>
<h4 id="251-what-they-are">2.5.1 What they are<a class="headerlink" href="#251-what-they-are" title="Permanent link">&para;</a></h4>
<ul>
<li><code>[dev-dependencies]</code> has the <strong>same specification formats</strong> as <code>[dependencies]</code> (version string shorthand or table form
  with <code>version</code>, <code>features</code>, <code>git</code>, <code>path</code>, <code>default-features</code>, etc.).</li>
<li>A crate listed in <code>[dev-dependencies]</code> is <strong>dev-only</strong>: it is available only in test contexts and must not be
  used by production code.</li>
</ul>
<h4 id="252-where-dev-dependencies-may-be-used-import-gating">2.5.2 Where dev-dependencies may be used (import gating)<a class="headerlink" href="#252-where-dev-dependencies-may-be-used-import-gating" title="Permanent link">&para;</a></h4>
<p>Crates that are only present in <code>[dev-dependencies]</code> may be imported via <code>rust::...</code> <strong>only</strong> from test contexts as
defined by the testing RFCs:</p>
<ul>
<li>test files under <code>tests/</code> (<code>test_*.incn</code> / <code>*_test.incn</code>) (RFC 019), and</li>
<li>inline <code>module tests:</code> blocks inside production source files (RFC 018/019).</li>
</ul>
<p>If production code imports a dev-only crate, it is a <strong>compile-time error</strong> with a targeted diagnostic:</p>
<ul>
<li>explain the crate is dev-only (<code>[dev-dependencies]</code>)</li>
<li>suggest moving it to <code>[dependencies]</code> if it is required at runtime.</li>
</ul>
<h4 id="253-how-dev-dependencies-affect-cargo-project-generation">2.5.3 How dev-dependencies affect Cargo project generation<a class="headerlink" href="#253-how-dev-dependencies-affect-cargo-project-generation" title="Permanent link">&para;</a></h4>
<p>Because Incan generates Cargo projects to compile and test:</p>
<ul>
<li><code>incan build</code> / <code>incan run</code>:<ul>
<li>generated <code>Cargo.toml</code> must include Cargo <code>[dependencies]</code> entries from <code>incan.toml</code> <code>[dependencies]</code></li>
<li>it must <strong>not</strong> include crates that are only in <code>[dev-dependencies]</code></li>
</ul>
</li>
<li><code>incan test</code>:<ul>
<li>the generated test harness project must include:<ul>
<li>Cargo <code>[dependencies]</code> entries from <code>incan.toml</code> <code>[dependencies]</code> (tests exercise production code), and</li>
<li>Cargo <code>[dev-dependencies]</code> entries from <code>incan.toml</code> <code>[dev-dependencies]</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="254-locking-relationship-to-incanlock">2.5.4 Locking (relationship to <code>incan.lock</code>)<a class="headerlink" href="#254-locking-relationship-to-incanlock" title="Permanent link">&para;</a></h4>
<p><code>incan.lock</code> is the project-root, committed lockfile and the source of truth for locked builds (see 3.03.3).</p>
<p>Normative requirement:</p>
<ul>
<li><code>incan.lock</code> must cover the resolved dependency graph for <strong>both</strong>:<ul>
<li><code>[dependencies]</code>, and</li>
<li><code>[dev-dependencies]</code> (so <code>incan test --locked</code> is meaningful and reproducible).</li>
</ul>
</li>
</ul>
<h4 id="255-overlap-rules-same-crate-in-both-tables">2.5.5 Overlap rules (same crate in both tables)<a class="headerlink" href="#255-overlap-rules-same-crate-in-both-tables" title="Permanent link">&para;</a></h4>
<p>If the same crate name appears in both <code>[dependencies]</code> and <code>[dev-dependencies]</code>:</p>
<ul>
<li>the crate is treated as a normal dependency (it is available in production code), and</li>
<li>the specs must be compatible:<ul>
<li>version/source/default-features must match (for this RFC), otherwise it is an error</li>
<li>features are unioned (Cargo-like behavior).</li>
</ul>
</li>
</ul>
<hr />
<h2 id="3-lock-file-incanlock">3. Lock File (<code>incan.lock</code>)<a class="headerlink" href="#3-lock-file-incanlock" title="Permanent link">&para;</a></h2>
<p>For reproducible builds, Incan uses a project-root lockfile named <code>incan.lock</code>.</p>
<p>Design goal:</p>
<ul>
<li>Keep the user-facing artifact <strong>Incan-first</strong> (<code>incan.lock</code>), while still leveraging Cargos proven locking semantics.</li>
<li>Avoid unstable Cargo features like <code>--lockfile-path</code> (nightly-only as of 2026).</li>
<li>Enable strict modes with clear what to do next errors, aligned with RFC 020s Cargo policy flags.</li>
</ul>
<h3 id="30-trust-model-and-location-normative">3.0 Trust model and location (normative)<a class="headerlink" href="#30-trust-model-and-location-normative" title="Permanent link">&para;</a></h3>
<ul>
<li><code>incan.lock</code> lives at the <strong>project root</strong> and is intended to be <strong>committed</strong> to version control.</li>
<li><code>incan.lock</code> is the <strong>source of truth</strong> for what locked means in Incan.</li>
<li>In locked modes, tooling must never silently change dependency resolution; any drift must be a hard error with a clear
  instruction to run <code>incan lock</code>.</li>
</ul>
<h4 id="301-project-mode-vs-single-file-mode-normative">3.0.1 Project mode vs single-file mode (normative)<a class="headerlink" href="#301-project-mode-vs-single-file-mode-normative" title="Permanent link">&para;</a></h4>
<p>This RFC defines <code>incan.lock</code> as a <strong>project artifact</strong>.</p>
<p>Definitions:</p>
<ul>
<li><strong>Project mode</strong>: a project root exists (a directory containing <code>incan.toml</code>, discovered per RFC 015).</li>
<li><strong>Single-file mode</strong>: no project root exists (<code>incan.toml</code> is not found), and the toolchain is compiling a single file.</li>
</ul>
<p>Rules:</p>
<ul>
<li>In <strong>project mode</strong>, strict flags (<code>--locked</code> / <code>--frozen</code>, RFC 020) are enforced against <code>incan.lock</code>:<ul>
<li><code>incan.lock</code> must exist and be up to date (fingerprint matches), otherwise error with "run <code>incan lock</code>".</li>
<li>Cargo is invoked with the corresponding Cargo policy flags (RFC 020), and <code>Cargo.lock</code> is materialized from
  <code>incan.lock</code> into the generated project directory.</li>
</ul>
</li>
<li>In <strong>single-file mode</strong>, there is no <code>incan.lock</code>:<ul>
<li>Rust dependencies may only be specified via inline annotations (<code>@ "..."</code> / <code>with [...]</code>) and/or known-good defaults.</li>
<li>Strict flags (<code>--locked</code> / <code>--frozen</code>) are interpreted at the Cargo layer only (RFC 020) using the generated
  projects <code>Cargo.lock</code> as the lock artifact.</li>
</ul>
</li>
</ul>
<h3 id="31-format">3.1 Format<a class="headerlink" href="#31-format" title="Permanent link">&para;</a></h3>
<p><code>incan.lock</code> is a small container file that embeds a Cargo lockfile payload.</p>
<p>Rationale:</p>
<ul>
<li>Cargo expects a file named <code>Cargo.lock</code> adjacent to the <code>Cargo.toml</code> it is building.</li>
<li>Stable Cargo does not support redirecting the lockfile path.</li>
<li>Therefore, Incan materializes the embedded payload to <code>Cargo.lock</code> in the generated build/test project directory.</li>
</ul>
<p>Format (normative; TOML container):</p>
<div class="language-toml highlight"><pre><span></span><code><span class="c1"># Auto-generated by Incan - do not edit manually</span>
<span class="c1"># Regenerate with: incan lock</span>

<span class="k">[incan]</span>
<span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="n">incan-version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.2.0&quot;</span>
<span class="n">generated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2026-01-21T12:00:00Z&quot;</span>

<span class="c1"># Cargo feature selection for the generated Rust package at lock time.</span>
<span class="c1"># This matters because Cargo feature selection can change the resolved dependency graph.</span>
<span class="n">cargo-features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">cargo-no-default-features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">cargo-all-features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>

<span class="c1"># Fingerprint of the effective dependency inputs (incan.toml dependency tables + inline annotations + known-good defaults)</span>
<span class="c1"># This intentionally excludes non-dependency settings (e.g. `[build].rust-edition`).</span>
<span class="c1"># Used for strict-mode validation (`--locked` / `--frozen`) (uv-style: error if lock is out of date).</span>
<span class="n">deps-fingerprint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;sha256:...&quot;</span>

<span class="k">[cargo]</span>
<span class="c1"># Verbatim Cargo.lock payload.</span>
<span class="c1"># Incan writes this string out as `Cargo.lock` next to the generated `Cargo.toml` when invoking Cargo.</span>
<span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2"># This file is automatically @generated by Cargo.</span>
<span class="s2"># It is not intended for manual editing.</span>
<span class="s2">version = 4</span>

<span class="s2">[[package]]</span>
<span class="s2">name = &quot;serde&quot;</span>
<span class="s2">version = &quot;1.0.195&quot;</span>
<span class="s2">source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;</span>
<span class="s2">checksum = &quot;...&quot;</span>

<span class="s2"># ... more Cargo.lock content ...</span>
<span class="s2">&quot;&quot;&quot;</span>
</code></pre></div>
<p>Notes:</p>
<ul>
<li>The embedded Cargo lock is stored as a verbatim payload; Incan does not define a second dependency graph format here.</li>
<li>The <code>deps-fingerprint</code> is an Incan-level affordance so <code>--locked</code> can fail fast and explain run <code>incan lock</code>.</li>
</ul>
<h3 id="311-canonicalization-and-deps-fingerprint-normative">3.1.1 Canonicalization and <code>deps-fingerprint</code> (normative)<a class="headerlink" href="#311-canonicalization-and-deps-fingerprint-normative" title="Permanent link">&para;</a></h3>
<p>The canonicalization rules for the embedded Cargo lock payload, and the full <code>deps-fingerprint</code> algorithm, are specified
in <strong>Appendix A</strong>.</p>
<h3 id="32-cli-commands">3.2 CLI Commands<a class="headerlink" href="#32-cli-commands" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>incan build</code></td>
<td>Build; uses lock file if present</td>
</tr>
<tr>
<td><code>incan lock</code></td>
<td>Regenerate lock file from current dependencies</td>
</tr>
</tbody>
</table>
<p>Note (normative):</p>
<ul>
<li><code>incan lock</code> is a project command and requires a project root (<code>incan.toml</code>) per RFC 015.</li>
</ul>
<p>Default behavior (normative; uv-inspired):</p>
<ul>
<li>If <code>incan.lock</code> is missing and no strict policy flag is set, <code>incan build</code> / <code>incan test</code> may resolve dependencies and
  create <code>incan.lock</code> automatically (first-run convenience).</li>
<li>If a strict policy flag is set (<code>--locked</code> or <code>--frozen</code> per RFC 020), <code>incan.lock</code> must already exist; otherwise the
  command must fail with a targeted diagnostic instructing the user to run <code>incan lock</code>.</li>
</ul>
<blockquote>
<p>Note: Cargo-level offline/locked enforcement flags (<code>--offline/--locked/--frozen</code>) are specified by RFC 020. This RFC
defines the Incan-level dependency and lockfile model; Cargo policy is a separate concern.</p>
</blockquote>
<h4 id="321-strict-mode-flags-combined-meaning-normative">3.2.1 Strict-mode flags: combined meaning (normative)<a class="headerlink" href="#321-strict-mode-flags-combined-meaning-normative" title="Permanent link">&para;</a></h4>
<p>These flags have a <strong>combined</strong> effect:</p>
<ul>
<li>they constrain Incans own dependency/lock behavior (<code>incan.lock</code>), and</li>
<li>they are forwarded to the underlying Cargo invocations (RFC 020).</li>
</ul>
<p>Rules:</p>
<ul>
<li><code>incan build/test --locked</code>:<ul>
<li><strong>Incan lock layer</strong>: <code>incan.lock</code> must exist and be <strong>up to date</strong> (its <code>deps-fingerprint</code> matches the current
  effective dependency inputs). If not, fail with run <code>incan lock</code>.</li>
<li><strong>Cargo policy layer</strong>: Incan must invoke Cargo with <code>--locked</code>.</li>
</ul>
</li>
<li><code>incan build/test --frozen</code>:<ul>
<li><strong>Incan lock layer</strong>: same as <code>--locked</code> (lock must exist and be up to date).</li>
<li><strong>Cargo policy layer</strong>: Incan must invoke Cargo with <code>--frozen</code> (equivalent to Cargo <code>--offline --locked</code>, per RFC
  020).</li>
</ul>
</li>
</ul>
<p>Rationale:</p>
<ul>
<li><code>--frozen</code> is the <strong>strictest</strong> mode and should not allow stale locks.</li>
<li>The difference between <code>--locked</code> and <code>--frozen</code> is the <strong>offline</strong> constraint at the Cargo layer, not whether lock
  freshness is checked.</li>
</ul>
<h4 id="322-incan-lock-and-restricted-environments-normative-direction">3.2.2 <code>incan lock</code> and restricted environments (normative direction)<a class="headerlink" href="#322-incan-lock-and-restricted-environments-normative-direction" title="Permanent link">&para;</a></h4>
<p><code>incan lock</code> is the mechanism for producing/refreshing <code>incan.lock</code>.</p>
<p>Normative requirements:</p>
<ul>
<li>Strict flags <code>--locked/--frozen</code> are not meaningful for <code>incan lock</code> and should be rejected with a clear diagnostic
  (including when set via CI environment variables).</li>
<li>
<p><code>incan lock</code> must accept the same Cargo policy sources as other commands (RFC 020 precedence rules):</p>
<ul>
<li>CLI flags: <code>--offline</code> and <code>--cargo-args ...</code></li>
<li>Environment variables: <code>INCAN_OFFLINE=1</code> and <code>INCAN_CARGO_ARGS="..."</code></li>
</ul>
</li>
<li>
<p><code>incan lock</code> must forward the relevant policy to the underlying Cargo operations it uses for resolution (e.g. it must
  honor <code>--offline</code> when set).</p>
</li>
<li>In offline mode, lock generation must fail if the required dependency sources are not already available locally (Cargo
  cache, mirror, or vendor directory). This is expected behavior and should surface Cargos error with a short prefix
  clarifying that offline policy caused the failure.</li>
</ul>
<p>Recommended workflows (informative; enterprise-friendly):</p>
<ul>
<li><strong>Cache priming</strong>: run <code>incan lock</code> once without offline policy in a controlled environment to populate registries/git
  caches, then use <code>--frozen</code> in CI.</li>
<li><strong>Mirrors</strong>: use Cargo registry mirrors / sparse index configuration via <code>.cargo/config.toml</code> (generated-project
  compatible) to avoid public network dependencies.</li>
<li><strong>Vendoring</strong>: prefer a <code>cargo vendor</code>-style workflow for fully air-gapped builds (future extension; RFC 020).</li>
</ul>
<h3 id="33-relationship-to-cargolock-normative">3.3 Relationship to <code>Cargo.lock</code> (normative)<a class="headerlink" href="#33-relationship-to-cargolock-normative" title="Permanent link">&para;</a></h3>
<p>Cargo uses <code>Cargo.lock</code> as its lockfile.</p>
<p>Rules:</p>
<ul>
<li><code>incan.lock</code> is the projects committed lockfile and contains an embedded <code>Cargo.lock</code> payload.</li>
<li><code>Cargo.lock</code> files written into generated Rust output directories are <strong>derived artifacts</strong> produced by extracting the
  embedded payload from <code>incan.lock</code>.</li>
<li>In locked modes, Incan must ensure the embedded lock matches the current dependency inputs:<ul>
<li><code>--locked</code>: lock must exist and be <strong>up to date</strong> (fingerprint matches); otherwise fail and instruct <code>incan lock</code>.</li>
<li><code>--frozen</code>: same as <code>--locked</code> for freshness; additionally enforce Cargo frozen/offline policy (RFC 020).</li>
</ul>
</li>
<li>Cargo policy flags still apply to the underlying Cargo invocation (RFC 020), but the authoritative lock artifact is
  <code>incan.lock</code> at the project root.</li>
</ul>
<h3 id="34-design-inspiration-informative-hatch-vs-uv">3.4 Design inspiration (informative): Hatch vs uv<a class="headerlink" href="#34-design-inspiration-informative-hatch-vs-uv" title="Permanent link">&para;</a></h3>
<p>For design inspiration and background context (Hatch vs uv), see <strong>Appendix B</strong>.</p>
<hr />
<h2 id="4-resolution-rules">4. Resolution Rules<a class="headerlink" href="#4-resolution-rules" title="Permanent link">&para;</a></h2>
<p>When resolving a Rust crate dependency, the following precedence applies (highest to lowest):</p>
<div class="language-text highlight"><pre><span></span><code>1. incan.toml [dependencies] / [dev-dependencies]  explicit project config wins
2. Inline version annotation        import rust::foo @ &quot;1.0&quot;
3. Known-good defaults              curated list in compiler
4. Error                            unknown crate without version
</code></pre></div>
<p>Note (normative):</p>
<ul>
<li><code>[dependencies]</code> applies to all commands (<code>build</code>/<code>run</code>/<code>test</code>).</li>
<li><code>[dev-dependencies]</code> is only considered for test contexts (see 2.5).</li>
</ul>
<h3 id="41-known-good-defaults">4.1 Known-Good Defaults<a class="headerlink" href="#41-known-good-defaults" title="Permanent link">&para;</a></h3>
<p>The compiler maintains a curated list of common crates with tested version/feature combinations.
These serve as <strong>convenient defaults</strong>, not restrictions:</p>
<div class="language-rust highlight"><pre><span></span><code><span class="c1">// In compiler (simplified)</span>
<span class="k">static</span><span class="w"> </span><span class="n">KNOWN_GOOD</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[(</span><span class="o">&amp;</span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="kt">str</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[</span>
<span class="w">    </span><span class="p">(</span><span class="s">&quot;serde&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">r#&quot;{ version = &quot;1.0&quot;, features = [&quot;derive&quot;] }&quot;#</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s">&quot;tokio&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">r#&quot;{ version = &quot;1&quot;, features = [&quot;rt-multi-thread&quot;, &quot;macros&quot;] }&quot;#</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s">&quot;reqwest&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">r#&quot;{ version = &quot;0.11&quot;, features = [&quot;json&quot;] }&quot;#</span><span class="p">),</span>
<span class="w">    </span><span class="c1">// ... etc</span>
<span class="p">];</span>
</code></pre></div>
<p>Users can <strong>override</strong> these defaults via <code>incan.toml</code> or inline annotations.</p>
<p>Normative governance:</p>
<ul>
<li>The known-good list is versioned with the Incan toolchain (compiler/runtime) and is an onboarding convenience only.</li>
<li>Known-good defaults apply <strong>only</strong> when a crate has <strong>no explicit spec</strong> in <code>incan.toml</code> and no inline annotation.</li>
<li>Known-good defaults must never win over explicit user configuration.</li>
</ul>
<p>User-facing contract (strongly recommended):</p>
<ul>
<li>The toolchain must publish a documented list of known-good crates (and their default version/features) per release
  (e.g. in release notes and/or a dedicated docs page).</li>
<li>Changes to known-good defaults are allowed, but they must be treated as compatibility-relevant:<ul>
<li>security updates may require updating defaults,</li>
<li>and toolchain upgrades may require re-locking for projects that rely on defaults (because defaults participate in
  <code>deps-fingerprint</code>).</li>
</ul>
</li>
<li>If a project wants stability across toolchain upgrades, it should pin versions/features explicitly in <code>incan.toml</code>.</li>
</ul>
<h3 id="42-conflict-resolution">4.2 Conflict Resolution<a class="headerlink" href="#42-conflict-resolution" title="Permanent link">&para;</a></h3>
<div class="language-incan highlight"><pre><span></span><code><span class="c1"># This is an error - conflicting versions</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">tokio</span> <span class="o">@</span> <span class="s2">&quot;1.0&quot;</span>   <span class="c1"># Inline says 1.0</span>
<span class="c1"># incan.toml says tokio = &quot;2.0&quot;</span>
</code></pre></div>
<p>Error message:</p>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>conflicting<span class="w"> </span>versions<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="sb">`</span>tokio<span class="sb">`</span>

<span class="w">  </span>--&gt;<span class="w"> </span>src/main.incn:3
<span class="w">    </span>import<span class="w"> </span>rust::tokio<span class="w"> </span>@<span class="w"> </span><span class="s2">&quot;1.0&quot;</span>

<span class="w">  </span>--&gt;<span class="w"> </span>incan.toml:12
<span class="w">    </span><span class="nv">tokio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span>

Remove<span class="w"> </span>the<span class="w"> </span>inline<span class="w"> </span>version<span class="w"> </span>to<span class="w"> </span>use<span class="w"> </span>incan.toml,<span class="w"> </span>or<span class="w"> </span>update<span class="w"> </span>incan.toml<span class="w"> </span>to<span class="w"> </span>match.
</code></pre></div>
<h3 id="43-merging-rules-normative">4.3 Merging rules (normative)<a class="headerlink" href="#43-merging-rules-normative" title="Permanent link">&para;</a></h3>
<p>The resolver collects all crate requirements across a project before invoking Cargo.</p>
<p>Definitions:</p>
<ul>
<li>A <strong>crate spec</strong> is the resolved dependency request for a single Rust crate (version requirement, source, features,
  and <code>default-features</code> policy).</li>
</ul>
<p>Rules:</p>
<ul>
<li><strong>Single source of truth when <code>incan.toml</code> exists</strong>:<ul>
<li>If a crate is specified in <code>incan.toml</code> (either <code>[dependencies]</code> or <code>[dev-dependencies]</code>, including their <code>rust.*</code>
  aliases), inline annotations for that crate are a <strong>compile-time error</strong>.</li>
<li>Rationale: avoid scattering dependency policy throughout code; keep audits and reviews centralized.</li>
</ul>
</li>
<li><strong>Multiple inline sites (no <code>incan.toml</code> entry)</strong>:<ul>
<li>Version requirement strings must match exactly across all inline sites for a given crate (for this RFC).</li>
<li>Source (registry vs git vs path) must match; mismatches are an error.</li>
<li>Features are <strong>unioned</strong> across all sites.</li>
<li><code>default-features</code> must be consistent across all sites; mismatches are an error.</li>
</ul>
</li>
</ul>
<p>Future extensions may loosen the inline is error when <code>incan.toml</code> exists rule (e.g. allow inline <em>feature adds</em> only),
but within the scope of this RFC, it should remain strict.</p>
<h3 id="44-source-policy-security-reproducibility-normative-direction">4.4 Source policy (security + reproducibility) (normative direction)<a class="headerlink" href="#44-source-policy-security-reproducibility-normative-direction" title="Permanent link">&para;</a></h3>
<p>Git and path dependencies are supported, but reproducible builds require additional constraints:</p>
<ul>
<li>In locked/CI mode, git dependencies must resolve to an <strong>exact commit</strong> (e.g. <code>rev = "..."</code> or an immutable tag that is
  recorded as a commit in <code>incan.lock</code>). Floating <code>branch = "..."</code> is not reproducible and should be rejected in strict
  mode.</li>
<li>Path dependencies are inherently machine-local unless vendored; locked/CI mode may reject them unless explicitly
  allowlisted by configuration (future RFC 020 / RFC 015 integration).</li>
</ul>
<hr />
<h2 id="5-error-messages">5. Error Messages<a class="headerlink" href="#5-error-messages" title="Permanent link">&para;</a></h2>
<h3 id="51-unknown-crate-without-version">5.1 Unknown Crate Without Version<a class="headerlink" href="#51-unknown-crate-without-version" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>unknown<span class="w"> </span>Rust<span class="w"> </span>crate<span class="w"> </span><span class="sb">`</span>my_obscure_lib<span class="sb">`</span>

<span class="w">  </span>--&gt;<span class="w"> </span>src/main.incn:5
<span class="w">    </span>import<span class="w"> </span>rust::my_obscure_lib

This<span class="w"> </span>crate<span class="w"> </span>isn<span class="err">&#39;</span>t<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>known-good<span class="w"> </span>list.<span class="w"> </span>Specify<span class="w"> </span>a<span class="w"> </span>version:

<span class="w">    </span>import<span class="w"> </span>rust::my_obscure_lib<span class="w"> </span>@<span class="w"> </span><span class="s2">&quot;1.0&quot;</span>

Or<span class="w"> </span>add<span class="w"> </span>it<span class="w"> </span>to<span class="w"> </span>incan.toml:

<span class="w">    </span><span class="o">[</span>dependencies<span class="o">]</span>
<span class="w">    </span><span class="nv">my_obscure_lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>

Tip:<span class="w"> </span>Check<span class="w"> </span>https://crates.io/crates/my_obscure_lib<span class="w"> </span><span class="k">for</span><span class="w"> </span>available<span class="w"> </span>versions.
</code></pre></div>
<h3 id="52-feature-not-found">5.2 Feature Not Found<a class="headerlink" href="#52-feature-not-found" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>feature<span class="w"> </span><span class="sb">`</span>nonexistent<span class="sb">`</span><span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span>crate<span class="w"> </span><span class="sb">`</span>tokio<span class="sb">`</span>

<span class="w">  </span>--&gt;<span class="w"> </span>src/main.incn:3
<span class="w">    </span>import<span class="w"> </span>rust::tokio<span class="w"> </span>@<span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="w"> </span>with<span class="w"> </span><span class="o">[</span><span class="s2">&quot;nonexistent&quot;</span><span class="o">]</span>

Available<span class="w"> </span>features:<span class="w"> </span>full,<span class="w"> </span>rt,<span class="w"> </span>rt-multi-thread,<span class="w"> </span>macros,<span class="w"> </span>time,<span class="w"> </span>sync,<span class="w"> </span>net,<span class="w"> </span>...
</code></pre></div>
<h3 id="53-version-not-found">5.3 Version Not Found<a class="headerlink" href="#53-version-not-found" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>version<span class="w"> </span><span class="sb">`</span><span class="m">99</span>.0<span class="sb">`</span><span class="w"> </span>of<span class="w"> </span><span class="sb">`</span>serde<span class="sb">`</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist

<span class="w">  </span>--&gt;<span class="w"> </span>src/main.incn:3
<span class="w">    </span>import<span class="w"> </span>rust::serde<span class="w"> </span>@<span class="w"> </span><span class="s2">&quot;99.0&quot;</span>

Latest<span class="w"> </span>version:<span class="w"> </span><span class="m">1</span>.0.195
Tip:<span class="w"> </span>Check<span class="w"> </span>https://crates.io/crates/serde/versions<span class="w"> </span><span class="k">for</span><span class="w"> </span>available<span class="w"> </span>versions.
</code></pre></div>
<h3 id="54-lock-out-of-date-locked-frozen">5.4 Lock Out of Date (<code>--locked</code> / <code>--frozen</code>)<a class="headerlink" href="#54-lock-out-of-date-locked-frozen" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>incan.lock<span class="w"> </span>is<span class="w"> </span>out<span class="w"> </span>of<span class="w"> </span>date

<span class="w">  </span>expected<span class="w"> </span>deps-fingerprint:<span class="w"> </span>sha256:aaaaaaaa...
<span class="w">    </span>actual<span class="w"> </span>deps-fingerprint:<span class="w"> </span>sha256:bbbbbbbb...

This<span class="w"> </span>usually<span class="w"> </span>means<span class="w"> </span>your<span class="w"> </span>dependency<span class="w"> </span>inputs<span class="w"> </span>changed<span class="w"> </span>since<span class="w"> </span>the<span class="w"> </span>lock<span class="w"> </span>was<span class="w"> </span>generated:

-<span class="w"> </span>incan.toml<span class="w"> </span>dependency<span class="w"> </span>entries<span class="w"> </span>changed,<span class="w"> </span>and/or
-<span class="w"> </span>inline<span class="w"> </span>rust::...<span class="w"> </span>annotations<span class="w"> </span>changed,<span class="w"> </span>and/or
-<span class="w"> </span>toolchain<span class="w"> </span>known-good<span class="w"> </span>defaults<span class="w"> </span>changed<span class="w"> </span><span class="o">(</span><span class="k">if</span><span class="w"> </span>you<span class="w"> </span>rely<span class="w"> </span>on<span class="w"> </span>defaults<span class="o">)</span>.
-<span class="w"> </span>Cargo<span class="w"> </span>feature<span class="w"> </span>selection<span class="w"> </span>changed<span class="w"> </span><span class="o">(</span>e.g.<span class="w"> </span><span class="sb">`</span>--cargo-args<span class="w"> </span><span class="s2">&quot;--features&quot;</span><span class="w"> </span>...<span class="sb">`</span><span class="o">)</span>.

Fix:

<span class="w">    </span>incan<span class="w"> </span>lock

Tip:<span class="w"> </span>If<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>toolchain-upgrade<span class="w"> </span>stability,<span class="w"> </span>pin<span class="w"> </span>crate<span class="w"> </span>versions/features<span class="w"> </span>explicitly<span class="w"> </span><span class="k">in</span><span class="w"> </span>incan.toml.
</code></pre></div>
<h3 id="55-optional-dependency-not-enabled">5.5 Optional Dependency Not Enabled<a class="headerlink" href="#55-optional-dependency-not-enabled" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>Rust<span class="w"> </span>crate<span class="w"> </span><span class="sb">`</span>fancy_logging<span class="sb">`</span><span class="w"> </span>is<span class="w"> </span>optional<span class="w"> </span>but<span class="w"> </span>not<span class="w"> </span>enabled<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>build

<span class="w">  </span>--&gt;<span class="w"> </span>src/main.incn:3
<span class="w">    </span>import<span class="w"> </span>rust::fancy_logging

This<span class="w"> </span>crate<span class="w"> </span>is<span class="w"> </span>declared<span class="w"> </span>as<span class="w"> </span>optional<span class="w"> </span><span class="k">in</span><span class="w"> </span>incan.toml:

<span class="w">    </span><span class="o">[</span>dependencies.optional<span class="o">]</span>
<span class="w">    </span><span class="nv">fancy_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.3&quot;</span><span class="w"> </span><span class="o">}</span>

Enable<span class="w"> </span>the<span class="w"> </span>Cargo<span class="w"> </span>feature<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>dependency<span class="w"> </span><span class="o">(</span>usually<span class="w"> </span>the<span class="w"> </span>dependency<span class="w"> </span>key<span class="o">)</span>,<span class="w"> </span><span class="k">for</span><span class="w"> </span>example:

<span class="w">    </span>incan<span class="w"> </span>build<span class="w"> </span>--cargo-args<span class="w"> </span><span class="s2">&quot;--features&quot;</span><span class="w"> </span><span class="s2">&quot;fancy_logging&quot;</span>

Alternatively,<span class="w"> </span>configure<span class="w"> </span>Cargo<span class="w"> </span>feature<span class="w"> </span>selection<span class="w"> </span><span class="k">in</span><span class="w"> </span>your<span class="w"> </span>project<span class="w"> </span>configuration<span class="w"> </span><span class="o">(</span>once<span class="w"> </span>supported<span class="o">)</span>,<span class="w"> </span>so<span class="w"> </span>builds<span class="w"> </span>dont<span class="w"> </span>rely<span class="w"> </span>on<span class="w"> </span>command-line<span class="w"> </span>flags.

Note:<span class="w"> </span>changing<span class="w"> </span>enabled<span class="w"> </span>features<span class="w"> </span>can<span class="w"> </span>change<span class="w"> </span>the<span class="w"> </span>resolved<span class="w"> </span>dependency<span class="w"> </span>graph<span class="p">;</span><span class="w"> </span>you<span class="w"> </span>may<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>re-run<span class="w"> </span><span class="sb">`</span>incan<span class="w"> </span>lock<span class="sb">`</span><span class="w"> </span>before<span class="w"> </span>using
<span class="sb">`</span>--locked<span class="sb">`</span><span class="w"> </span>/<span class="w"> </span><span class="sb">`</span>--frozen<span class="sb">`</span>.
</code></pre></div>
<h3 id="56-inline-annotation-forbidden-crate-is-configured-in-incantoml">5.6 Inline Annotation Forbidden (crate is configured in <code>incan.toml</code>)<a class="headerlink" href="#56-inline-annotation-forbidden-crate-is-configured-in-incantoml" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>inline<span class="w"> </span>Rust<span class="w"> </span>dependency<span class="w"> </span>annotation<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="sb">`</span>tokio<span class="sb">`</span><span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>allowed<span class="w"> </span>because<span class="w"> </span>it<span class="w"> </span>is<span class="w"> </span>configured<span class="w"> </span><span class="k">in</span><span class="w"> </span>incan.toml

<span class="w">  </span>--&gt;<span class="w"> </span>src/main.incn:3
<span class="w">    </span>import<span class="w"> </span>rust::tokio<span class="w"> </span>@<span class="w"> </span><span class="s2">&quot;1.0&quot;</span>

<span class="w">  </span>--&gt;<span class="w"> </span>incan.toml:12
<span class="w">    </span><span class="o">[</span>dependencies<span class="o">]</span>
<span class="w">    </span><span class="nv">tokio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.35&quot;</span>,<span class="w"> </span><span class="nv">features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;full&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">}</span>

This<span class="w"> </span>project<span class="w"> </span>uses<span class="w"> </span>incan.toml<span class="w"> </span>as<span class="w"> </span>the<span class="w"> </span>single<span class="w"> </span><span class="nb">source</span><span class="w"> </span>of<span class="w"> </span>truth<span class="w"> </span><span class="k">for</span><span class="w"> </span>Rust<span class="w"> </span>dependencies.
Remove<span class="w"> </span>the<span class="w"> </span>inline<span class="w"> </span>annotation,<span class="w"> </span>or<span class="w"> </span>update<span class="w"> </span>incan.toml.
</code></pre></div>
<h3 id="57-conflicting-inline-sites-no-incantoml-entry">5.7 Conflicting Inline Sites (no <code>incan.toml</code> entry)<a class="headerlink" href="#57-conflicting-inline-sites-no-incantoml-entry" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>conflicting<span class="w"> </span>inline<span class="w"> </span>dependency<span class="w"> </span>specifications<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="sb">`</span>uuid<span class="sb">`</span>

<span class="w">  </span>--&gt;<span class="w"> </span>src/a.incn:2
<span class="w">    </span>import<span class="w"> </span>rust::uuid<span class="w"> </span>@<span class="w"> </span><span class="s2">&quot;1.0&quot;</span>

<span class="w">  </span>--&gt;<span class="w"> </span>src/b.incn:7
<span class="w">    </span>import<span class="w"> </span>rust::uuid<span class="w"> </span>@<span class="w"> </span><span class="s2">&quot;1.1&quot;</span>

Inline<span class="w"> </span>specs<span class="w"> </span>must<span class="w"> </span>match<span class="w"> </span>exactly<span class="w"> </span>within<span class="w"> </span>a<span class="w"> </span>project<span class="w"> </span><span class="o">(</span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>RFC<span class="o">)</span>.
Fix:<span class="w"> </span>centralize<span class="w"> </span><span class="sb">`</span>uuid<span class="sb">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>incan.toml<span class="w"> </span>under<span class="w"> </span><span class="o">[</span>dependencies<span class="o">]</span>,<span class="w"> </span>or<span class="w"> </span>make<span class="w"> </span>the<span class="w"> </span>inline<span class="w"> </span>specs<span class="w"> </span>identical.
</code></pre></div>
<h3 id="58-dev-dependency-imported-from-production-code">5.8 Dev-Dependency Imported from Production Code<a class="headerlink" href="#58-dev-dependency-imported-from-production-code" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>Rust<span class="w"> </span>crate<span class="w"> </span><span class="sb">`</span>criterion<span class="sb">`</span><span class="w"> </span>is<span class="w"> </span>dev-only<span class="w"> </span>and<span class="w"> </span>cannot<span class="w"> </span>be<span class="w"> </span>imported<span class="w"> </span>from<span class="w"> </span>production<span class="w"> </span>code

<span class="w">  </span>--&gt;<span class="w"> </span>src/main.incn:5
<span class="w">    </span>import<span class="w"> </span>rust::criterion

<span class="w">  </span>--&gt;<span class="w"> </span>incan.toml:30
<span class="w">    </span><span class="o">[</span>dev-dependencies<span class="o">]</span>
<span class="w">    </span><span class="nv">criterion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.5&quot;</span>

Fix:<span class="w"> </span>move<span class="w"> </span><span class="sb">`</span>criterion<span class="sb">`</span><span class="w"> </span>to<span class="w"> </span><span class="o">[</span>dependencies<span class="o">]</span>,<span class="w"> </span>or<span class="w"> </span>import<span class="w"> </span>it<span class="w"> </span>only<span class="w"> </span>from<span class="w"> </span>tests<span class="w"> </span><span class="o">(</span>tests/<span class="w"> </span>or<span class="w"> </span>module<span class="w"> </span>tests:<span class="o">)</span>.
</code></pre></div>
<h3 id="59-git-branch-not-allowed-in-strict-mode">5.9 Git Branch Not Allowed in Strict Mode<a class="headerlink" href="#59-git-branch-not-allowed-in-strict-mode" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>git<span class="w"> </span>dependency<span class="w"> </span><span class="sb">`</span>my_internal_crate<span class="sb">`</span><span class="w"> </span>uses<span class="w"> </span><span class="sb">`</span><span class="nv">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="sb">`</span>,<span class="w"> </span>which<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>reproducible<span class="w"> </span><span class="k">in</span><span class="w"> </span>strict<span class="w"> </span>mode

<span class="w">  </span>--&gt;<span class="w"> </span>incan.toml:18
<span class="w">    </span><span class="nv">my_internal_crate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/company/crate&quot;</span>,<span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="w"> </span><span class="o">}</span>

Fix:
<span class="w">  </span>-<span class="w"> </span>pin<span class="w"> </span>to<span class="w"> </span>an<span class="w"> </span>exact<span class="w"> </span>commit:<span class="w"> </span><span class="nv">rev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;sha&gt;&quot;</span>
<span class="w">  </span>-<span class="w"> </span>or<span class="w"> </span>use<span class="w"> </span>an<span class="w"> </span>immutable<span class="w"> </span>tag<span class="w"> </span>and<span class="w"> </span>ensure<span class="w"> </span>the<span class="w"> </span>resolved<span class="w"> </span>commit<span class="w"> </span>is<span class="w"> </span>recorded<span class="w"> </span><span class="k">in</span><span class="w"> </span>incan.lock
</code></pre></div>
<h3 id="510-dependency-rename-collision">5.10 Dependency Rename Collision<a class="headerlink" href="#510-dependency-rename-collision" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code>error:<span class="w"> </span>dependency<span class="w"> </span>keys<span class="w"> </span>collide:<span class="w"> </span>both<span class="w"> </span>resolve<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>same<span class="w"> </span>package<span class="w"> </span><span class="sb">`</span>serde-json<span class="sb">`</span><span class="w"> </span>from<span class="w"> </span>crates.io

<span class="w">  </span>--&gt;<span class="w"> </span>incan.toml:12
<span class="w">    </span><span class="nv">serde_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;serde-json&quot;</span>,<span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="w"> </span><span class="o">}</span>

<span class="w">  </span>--&gt;<span class="w"> </span>incan.toml:13
<span class="w">    </span><span class="nv">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;serde-json&quot;</span>,<span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="w"> </span><span class="o">}</span>

Fix:<span class="w"> </span>keep<span class="w"> </span>only<span class="w"> </span>one<span class="w"> </span>key<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>package/source,<span class="w"> </span>or<span class="w"> </span>use<span class="w"> </span>a<span class="w"> </span>different<span class="w"> </span>package/source.
</code></pre></div>
<hr />
<h2 id="6-implementation-phases">6. Implementation Phases<a class="headerlink" href="#6-implementation-phases" title="Permanent link">&para;</a></h2>
<h3 id="phase-1-inline-versions-initial-scope">Phase 1: Inline Versions (initial scope)<a class="headerlink" href="#phase-1-inline-versions-initial-scope" title="Permanent link">&para;</a></h3>
<ul>
<li>Add <code>@ "version"</code> syntax to parser (implemented in <code>crates/incan_syntax</code>)</li>
<li>Pass version to <code>ProjectGenerator</code></li>
<li>Default behavior for unknown crates without an explicit version is a hard error (no wildcard fallback).</li>
</ul>
<p>Optional escape hatch (non-default; not required by this RFC):</p>
<ul>
<li>If an unpinned dependencies mode exists for local prototyping, it must be <strong>explicitly enabled</strong> (e.g. via a CLI
  flag) and must produce a visibly non-reproducible build warning suitable for CI policy enforcement.</li>
</ul>
<h3 id="phase-2-features-support">Phase 2: Features Support<a class="headerlink" href="#phase-2-features-support" title="Permanent link">&para;</a></h3>
<ul>
<li>Add <code>with ["feature"]</code> syntax (implemented in <code>crates/incan_syntax</code>)</li>
<li>Update codegen to emit features in generated Cargo metadata (Cargo.toml)</li>
</ul>
<h3 id="phase-3-project-configuration">Phase 3: Project Configuration<a class="headerlink" href="#phase-3-project-configuration" title="Permanent link">&para;</a></h3>
<ul>
<li>Parse <code>incan.toml</code> if present</li>
<li>Merge with inline annotations per resolution rules</li>
<li>Add <code>incan init</code> to the CLI to be able to create starter <code>incan.toml</code></li>
</ul>
<h3 id="phase-4-lock-file">Phase 4: Lock File<a class="headerlink" href="#phase-4-lock-file" title="Permanent link">&para;</a></h3>
<ul>
<li>Generate <code>incan.lock</code> on first build</li>
<li>Use locked versions on subsequent builds</li>
<li>Add <code>incan lock</code> command to CLI</li>
</ul>
<h3 id="phase-5-advanced-sources">Phase 5: Advanced Sources<a class="headerlink" href="#phase-5-advanced-sources" title="Permanent link">&para;</a></h3>
<ul>
<li>Git dependencies (<code>git = "..."</code>)</li>
<li>Path dependencies (<code>path = "..."</code>)</li>
<li>Optional dependencies</li>
</ul>
<hr />
<h2 id="7-examples">7. Examples<a class="headerlink" href="#7-examples" title="Permanent link">&para;</a></h2>
<h3 id="71-simple-usage-phase-1">7.1 Simple Usage (Phase 1+)<a class="headerlink" href="#71-simple-usage-phase-1" title="Permanent link">&para;</a></h3>
<div class="language-incan highlight"><pre><span></span><code><span class="c1"># Known-good crate - just works</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">serde</span>

<span class="c1"># Unknown crate - must specify version</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">obscure_parser</span> <span class="o">@</span> <span class="s2">&quot;2.1&quot;</span>

<span class="c1"># Known-good with different version</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">tokio</span> <span class="o">@</span> <span class="s2">&quot;1.35&quot;</span>  <span class="c1"># Override default</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, Rust ecosystem!&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="72-full-project-phase-3">7.2 Full Project (Phase 3+)<a class="headerlink" href="#72-full-project-phase-3" title="Permanent link">&para;</a></h3>
<p><strong>incan.toml:</strong></p>
<div class="language-toml highlight"><pre><span></span><code><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;web_service&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>

<span class="k">[dependencies]</span>
<span class="n">axum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.7&quot;</span>
<span class="n">tokio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;full&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="n">sqlx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;0.7&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;runtime-tokio&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;postgres&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="n">tracing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1&quot;</span>
</code></pre></div>
<p><strong>src/main.incn:</strong></p>
<div class="language-incan highlight"><pre><span></span><code><span class="c1"># No version needed - defined in incan.toml</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">axum</span> <span class="kn">import</span><span class="w"> </span><span class="nn">Router</span><span class="o">,</span><span class="w"> </span><span class="nn">Json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">sqlx</span> <span class="kn">import</span><span class="w"> </span><span class="nn">PgPool</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">tracing</span> <span class="k">as</span> <span class="n">log</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting server...&quot;</span><span class="p">)</span>
    <span class="n">app</span> <span class="o">=</span> <span class="nc">Router</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
    <span class="c1"># ...</span>
</code></pre></div>
<h3 id="73-mixed-inline-and-config">7.3 Mixed Inline and Config<a class="headerlink" href="#73-mixed-inline-and-config" title="Permanent link">&para;</a></h3>
<p><strong>incan.toml:</strong></p>
<div class="language-toml highlight"><pre><span></span><code><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;mixed_example&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>

<span class="k">[dependencies]</span>
<span class="n">serde</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;derive&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p><strong>src/main.incn:</strong></p>
<div class="language-incan highlight"><pre><span></span><code><span class="c1"># From incan.toml</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">serde</span>

<span class="c1"># Inline - not in incan.toml</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">uuid</span> <span class="o">@</span> <span class="s2">&quot;1.0&quot;</span> <span class="k">with</span> <span class="p">[</span><span class="s2">&quot;v4&quot;</span><span class="p">]</span>

<span class="c1"># Override known-good default for one-off use</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rust</span><span class="p">::</span><span class="n">chrono</span> <span class="o">@</span> <span class="s2">&quot;0.4&quot;</span> <span class="k">with</span> <span class="p">[</span><span class="s2">&quot;serde&quot;</span><span class="p">,</span> <span class="s2">&quot;clock&quot;</span><span class="p">]</span> <span class="kn">import</span><span class="w"> </span><span class="nn">DateTime</span><span class="o">,</span><span class="w"> </span><span class="nn">Utc</span>
</code></pre></div>
<hr />
<h2 id="8-comparison-with-pyprojecttoml">8. Comparison with pyproject.toml<a class="headerlink" href="#8-comparison-with-pyprojecttoml" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>pyproject.toml</th>
<th>incan.toml</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[project]</code></td>
<td><code>[project]</code></td>
<td>Same structure</td>
</tr>
<tr>
<td><code>dependencies = [...]</code></td>
<td><code>[dependencies]</code></td>
<td>Cargo-style dependency tables</td>
</tr>
<tr>
<td><code>[project.optional-dependencies]</code></td>
<td><code>[dependencies.optional]</code></td>
<td>Similar (optional groups)</td>
</tr>
<tr>
<td><code>[tool.pytest]</code></td>
<td>N/A</td>
<td>Tool-specific config not in scope</td>
</tr>
<tr>
<td><code>requires-python</code></td>
<td><code>requires-incan</code></td>
<td>Minimum version</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="9-open-questions">9. Open Questions<a class="headerlink" href="#9-open-questions" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Workspace support</strong>: Should <code>incan.toml</code> support workspaces with multiple packages?</li>
<li><strong>Private registries</strong>: How to authenticate with private Cargo registries?</li>
<li><strong>Auto-update tooling</strong>: Dependency update behavior (an <code>incan update</code> command) is intentionally out of scope for this
   RFC and should be specified in a dedicated future RFC (likely alongside project lifecycle tooling).</li>
</ol>
<hr />
<h2 id="10-checklist">10. Checklist<a class="headerlink" href="#10-checklist" title="Permanent link">&para;</a></h2>
<h3 id="implementing-phase-1-inline-versions">Implementing Phase 1: Inline Versions<a class="headerlink" href="#implementing-phase-1-inline-versions" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Parser: <code>@ "version"</code> syntax on <code>rust::...</code> imports</li>
<li>[ ] Validation: version requirement strings must use <strong>Cargo SemVer requirement syntax</strong> (not PEP 440)</li>
<li>[ ] Codegen/resolution: pass the crate spec (crate name + version requirement) to project generation</li>
<li>[ ] Error: unknown crate without version (hard error)</li>
<li>[ ] Docs: update rust_interop.md</li>
</ul>
<h3 id="implementing-phase-2-features">Implementing Phase 2: Features<a class="headerlink" href="#implementing-phase-2-features" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Parser: <code>with ["features"]</code> syntax</li>
<li>[ ] Resolution: features are unioned across sites per merging rules</li>
<li>[ ] Codegen: emit features in generated Cargo metadata</li>
<li>[ ] Error: unknown feature</li>
</ul>
<h3 id="implementing-phase-3-project-configuration">Implementing Phase 3: Project Configuration<a class="headerlink" href="#implementing-phase-3-project-configuration" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Parser: <code>incan.toml</code> dependency tables (canonical + aliases):<ul>
<li>[ ] <code>[dependencies]</code></li>
<li>[ ] <code>[dev-dependencies]</code></li>
<li>[ ] Optional group: <code>[dependencies.optional]</code></li>
<li>[ ] Alias support: <code>[rust.dependencies]</code> and <code>[rust.dev-dependencies]</code></li>
<li>[ ] Error if both canonical and alias table are provided for the same kind</li>
</ul>
</li>
<li>[ ] CLI: <code>incan init</code> command</li>
<li>[ ] Resolution: apply precedence rules (incan.toml &gt; inline &gt; known-good &gt; error)</li>
<li>[ ] Known-good defaults: apply only when there is no <code>incan.toml</code> spec (canonical or alias) and no inline annotation</li>
<li>[ ] Rule: if a crate is specified in incan.toml (canonical or alias tables), inline annotations for that crate are a
  compile-time error</li>
<li>[ ] Dev-dependencies gating: crates that are only in <code>[dev-dependencies]</code> are only allowed in test contexts (RFC 018/019)
  and error in production code</li>
<li>[ ] Error: version/source/default-features conflicts across sites (per 4.2/4.3)</li>
<li>[ ] Multiple inline sites (no incan.toml entry): enforce this RFCs merge rules:<ul>
<li>[ ] version requirement strings must match exactly across inline sites</li>
<li>[ ] source must match across inline sites</li>
<li>[ ] <code>default-features</code> must match across inline sites</li>
<li>[ ] features are unioned across inline sites</li>
</ul>
</li>
<li>[ ] Diagnostics: conflicting specs and resolution failures produce actionable errors that point to all relevant locations
  (e.g. inline import site(s) + <code>incan.toml</code>), and suggest the concrete fix</li>
</ul>
<h3 id="implementing-phase-4-lock-file">Implementing Phase 4: Lock File<a class="headerlink" href="#implementing-phase-4-lock-file" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] CLI: <code>incan lock</code> command (produce/refresh <code>incan.lock</code>)</li>
<li>[ ] <code>incan.lock</code> format (container + embedded Cargo.lock payload):<ul>
<li>[ ] <code>[incan]</code> metadata (<code>format</code>, <code>incan-version</code>, <code>generated</code>, <code>deps-fingerprint</code>, cargo feature selection)</li>
<li>[ ] <code>[cargo].lock</code> verbatim embedded <code>Cargo.lock</code> payload</li>
</ul>
</li>
<li>[ ] <code>deps-fingerprint</code> computation fingerprints dependency inputs and Cargo feature selection, and excludes non-dependency
  settings like <code>[build].rust-edition</code></li>
<li>[ ] Default behavior: if <code>incan.lock</code> is missing and no strict policy flag is set, builds/tests may generate it
  (first-run convenience)</li>
<li>[ ] Strict behavior (uv-style; see RFC 020 for flags):<ul>
<li>[ ] <code>--locked</code>: <code>incan.lock</code> must exist and be up-to-date (fingerprint matches) or fail with run incan lock</li>
<li>[ ] <code>--frozen</code>: <code>incan.lock</code> must exist and be up-to-date (fingerprint matches); use it and also enforce Cargo
  <code>--frozen</code> policy (offline + locked)</li>
</ul>
</li>
<li>[ ] Diagnostics: missing/out-of-date lock failures are targeted and instruct the user to run <code>incan lock</code></li>
<li>[ ] Materialization: embedded <code>Cargo.lock</code> is written as <code>Cargo.lock</code> into generated build/test Cargo project directories</li>
<li>[ ] Ensure dev-dependencies are represented so <code>incan test --locked</code> is meaningful</li>
</ul>
<h3 id="implementing-phase-5-advanced-sources">Implementing Phase 5: Advanced Sources<a class="headerlink" href="#implementing-phase-5-advanced-sources" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Git dependencies</li>
<li>[ ] Path dependencies</li>
<li>[ ] Optional dependencies</li>
<li>[ ] Dev dependencies</li>
</ul>
<hr />
<h2 id="appendix-a-lockfile-canonicalization-and-deps-fingerprint-normative">Appendix A: Lockfile canonicalization and <code>deps-fingerprint</code> (normative)<a class="headerlink" href="#appendix-a-lockfile-canonicalization-and-deps-fingerprint-normative" title="Permanent link">&para;</a></h2>
<h3 id="a1-embedded-lock-payload-canonicalization">A.1 Embedded lock payload canonicalization<a class="headerlink" href="#a1-embedded-lock-payload-canonicalization" title="Permanent link">&para;</a></h3>
<p>To avoid cross-platform churn and ensure deterministic <code>incan.lock</code> files:</p>
<ul>
<li>The embedded <code>[cargo].lock</code> payload must be stored as <strong>UTF-8</strong> text.</li>
<li>Newlines must be normalized to <code>\n</code> (LF). <code>\r\n</code> must not appear in the embedded payload.</li>
<li>The payload must end with a trailing newline.</li>
<li>The payload content is otherwise treated as an opaque string (verbatim Cargo output); Incan does not attempt to
  reformat or pretty print it.</li>
</ul>
<h3 id="a2-deps-fingerprint-algorithm">A.2 <code>deps-fingerprint</code> algorithm<a class="headerlink" href="#a2-deps-fingerprint-algorithm" title="Permanent link">&para;</a></h3>
<p><code>deps-fingerprint</code> exists to answer: Is the current lockfile still valid for the projects dependency inputs?</p>
<p>What is fingerprinted:</p>
<ul>
<li>The <strong>effective crate specs</strong> that would be used to generate the lock, after applying:<ul>
<li>table alias normalization (<code>[rust.dependencies]</code>  <code>[dependencies]</code>, etc.),</li>
<li>precedence rules (incan.toml &gt; inline &gt; known-good),</li>
<li>merge rules defined by this RFC (feature union, conflict errors),</li>
<li>and dev-dependency gating decisions (the lock must cover both <code>[dependencies]</code> and <code>[dev-dependencies]</code>).</li>
</ul>
</li>
<li>The <strong>Cargo feature selection</strong> used for the generated Rust package at lock time:<ul>
<li><code>cargo-all-features</code></li>
<li><code>cargo-no-default-features</code></li>
<li><code>cargo-features</code></li>
</ul>
</li>
</ul>
<p>Canonical representation:</p>
<ul>
<li>Build a canonical object:<ul>
<li><code>cargo_feature_selection</code></li>
<li><code>specs</code></li>
</ul>
</li>
</ul>
<p><code>cargo_feature_selection</code>:</p>
<ul>
<li><code>cargo_all_features</code>: boolean</li>
<li><code>cargo_no_default_features</code>: boolean</li>
<li><code>cargo_features</code>: set of strings:<ul>
<li>duplicates removed,</li>
<li>sorted lexicographically,</li>
<li>compared case-sensitively.</li>
</ul>
</li>
</ul>
<p><code>specs</code>:</p>
<ul>
<li>Build a list of entries <code>Spec { crate_name, kind, source, version_req, default_features, features, optional, package }</code>
  where:<ul>
<li><code>crate_name</code> is the dependency key used by <code>rust::crate_name</code> imports (Rust identifier form).</li>
<li><code>kind</code> is <code>"normal"</code> or <code>"dev"</code>.</li>
<li><code>source</code> is one of:<ul>
<li><code>registry</code> (crates.io default; any custom registries are out of scope),</li>
<li><code>git</code> (<code>git</code> URL plus exactly one of <code>rev</code> / <code>tag</code> / <code>branch</code>),</li>
<li><code>path</code> (path relative to project root, normalized with <code>/</code> separators).</li>
</ul>
</li>
<li><code>version_req</code> is the Cargo SemVer requirement string with:<ul>
<li>leading/trailing whitespace trimmed,</li>
<li>internal whitespace collapsed to single spaces,</li>
<li>otherwise preserved verbatim (for this RFC; no semantic re-serialization).</li>
</ul>
</li>
<li><code>default_features</code> is a boolean (missing defaults to <code>true</code>).</li>
<li><code>features</code> is a set:<ul>
<li>duplicates removed,</li>
<li>sorted lexicographically,</li>
<li>compared case-sensitively.</li>
</ul>
</li>
<li><code>optional</code> is a boolean (missing defaults to <code>false</code>).</li>
<li><code>package</code> is either absent or a string (see 2.4.1 for renames).</li>
</ul>
</li>
<li>Sort the list by <code>(kind, crate_name)</code> where <code>kind</code> sorts <code>"normal"</code> before <code>"dev"</code>.</li>
<li>Serialize the canonical object into canonical JSON (UTF-8, no whitespace, deterministic key order) and compute:
  <code>deps-fingerprint = "sha256:" + hex(sha256(json_bytes))</code>.</li>
</ul>
<p>Stability note:</p>
<ul>
<li>Because the fingerprint is computed from the <strong>effective</strong> crate specs, toolchain-provided known-good defaults become
  part of the fingerprint for projects that rely on defaults. Changing the toolchain may therefore require re-locking,
  which is expected when you are not fully pinned by explicit <code>incan.toml</code> configuration.</li>
</ul>
<hr />
<h2 id="appendix-b-design-inspiration-informative-hatch-vs-uv">Appendix B: Design inspiration (informative): Hatch vs uv<a class="headerlink" href="#appendix-b-design-inspiration-informative-hatch-vs-uv" title="Permanent link">&para;</a></h2>
<p>This design is inspired by the developer experience of modern Python tooling:</p>
<ul>
<li>Tools like Hatch focus on project workflow and environment management; reproducible installs are often achieved via a
  separate lock mechanism or plugin ecosystem.</li>
<li>Tools like Astrals <code>uv</code> popularized a clear separation between:<ul>
<li>lock (resolve and write a lockfile), and</li>
<li>sync/run (use the lockfile in strict modes).</li>
</ul>
</li>
</ul>
<p>Incan adopts the same mental model:</p>
<ul>
<li><code>incan lock</code> produces/refreshes <code>incan.lock</code></li>
<li><code>--locked</code> / <code>--frozen</code> (RFC 020) control the Cargo policy mode (<code>--locked</code> vs <code>--frozen</code>).
  In both cases, Incan requires a project-root <code>incan.lock</code> that is present and up to date (fingerprint matches).</li>
</ul>
<p>RFC 015 provides more details on the project model and lifecycle.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.sections", "navigation.indexes", "content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../_snippets/javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../../_snippets/javascripts/tablesort.js"></script>
      
        <script src="../../_snippets/javascripts/rfc_table_filter.js"></script>
      
    
  </body>
</html>