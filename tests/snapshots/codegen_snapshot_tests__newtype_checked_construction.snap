---
source: tests/codegen_snapshot_tests.rs
assertion_line: 272
expression: rust_code
---
// Generated by the Incan compiler v<INCAN_VERSION>

#![allow(unused_imports, dead_code, unused_variables)]

// __INCAN_INSERT_MODS__

use incan_stdlib::prelude::*;
use incan_derive::{FieldInfo, IncanClass};
#[derive(Debug, Clone, Copy)]
struct UserId(i64);
#[derive(Debug, Clone, Copy)]
struct Attempts(i64);
impl Attempts {
    fn from_underlying(n: i64) -> Result<Attempts, String> {
        if n <= 0 {
            return Err("attempts must be >= 1".to_string());
        }
        return Ok(Attempts(n));
    }
}
#[derive(Debug, Clone)]
struct Email(String);
impl Email {
    fn from_str(v: String) -> Result<Email, String> {
        if !incan_stdlib::strings::str_contains(&v, &"@") {
            return Err("missing @".to_string());
        }
        return Ok(Email(incan_stdlib::strings::str_lower(&v)));
    }
}
fn main() {
    let uid = UserId(42);
    let attempts = Attempts::from_underlying(5)
        .expect("validated newtype construction failed: Attempts::from_underlying");
    let email = Email::from_str("alice@example.com")
        .expect("validated newtype construction failed: Email::from_str");
    println!(
        "{}", { let __parts : [& str; 4usize] = ["", " ", " ", ""]; let __args : Vec <
        String > = vec![format!("{}", uid.0), format!("{}", attempts.0), format!("{}",
        email.0)]; incan_stdlib::strings::fstring(& __parts, & __args) }
    );
}
